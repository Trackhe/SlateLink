global
  stats socket /var/run/haproxy.sock mode 660 level admin
  log stdout format raw local0 info

userlist dataplaneapi
  user admin insecure-password adminpwd

defaults
  mode http
  option forwardfor
  timeout connect 5s
  timeout client  50s
  timeout server  50s

# Stats frontend (HTTP) for dashboard/API polling
frontend stats
  mode http
  bind :8404
  stats enable
  stats uri /stats
  stats refresh 10s

# Example HTTP frontend (optional; can be managed via Data Plane API)
frontend http_main
  mode http
  bind :80
  default_backend http_backend

# Example TCP frontend (optional; for stream proxy)
# frontend tcp_main
#   mode tcp
#   bind :5432
#   default_backend tcp_backend

# Example UDP listen (optional; HAProxy 2.3+)
# listen udp_dns
#   mode udp
#   bind :53
#   default_backend dns_backend

backend http_backend
  mode http
  balance roundrobin
  server example 127.0.0.1:8080 check

# backend tcp_backend
#   mode tcp
#   balance roundrobin
#   server tcp1 127.0.0.1:5433 check send-proxy-v2

# backend dns_backend
#   mode udp
#   balance roundrobin
#   server dns1 8.8.8.8:53 check
